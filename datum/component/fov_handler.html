<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;component&#x2F;fov_handler - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/component/fov_handler.html#var">Var Details</a> - <a href="datum/component/fov_handler.html#proc">Proc Details</a></header>
<main>
<h1>fov_handler <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/fov_handler.html">fov_handler</a></aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 2"/></a></h1>

<p>Component which handles Field of View masking for clients. FoV attributes are at /mob/living</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/component/fov_handler.html#var/applied_mask">applied_mask</a></th><td>Whether we are applying the masks now</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#var/blocker_mask">blocker_mask</a></th><td>The blocker mask applied to a client's screen</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#var/current_fov_x">current_fov_x</a></th><td>Currently applied x size of the fov masks</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#var/current_fov_y">current_fov_y</a></th><td>Currently applied y size of the fov masks</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#var/fov_angle">fov_angle</a></th><td>The angle of the mask we are applying</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#var/visual_shadow">visual_shadow</a></th><td>The shadow mask applied to a client's screen</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/component/fov_handler.html#proc/mob_logout">mob_logout</a></th><td>When a mob logs out, delete the component</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#proc/on_dir_change">on_dir_change</a></th><td>When a direction of the user changes, so do the masks</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#proc/update_fov_size">update_fov_size</a></th><td>Updates the size of the FOV masks by comparing them to client view size.</td></tr>
            <tr><th><a href="datum/component/fov_handler.html#proc/update_mask">update_mask</a></th><td>Updates the mask application to client by checking <code>stat</code> and <code>eye</code></td></tr>
            <tr><th><a href="datum/component/fov_handler.html#proc/update_visual_shadow_alpha">update_visual_shadow_alpha</a></th><td>When toggling combat mode, we update the alpha of the shadow mask</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/applied_mask"><aside class="declaration">var </aside>applied_mask
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L8">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 8"/></a></h3>
        <p>Whether we are applying the masks now</p><h3 id="var/blocker_mask"><aside class="declaration">var </aside>blocker_mask
            <aside>&ndash; /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/screen.html">screen</a>/fov_blocker</aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L12">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 12"/></a></h3>
        <p>The blocker mask applied to a client's screen</p><h3 id="var/current_fov_x"><aside class="declaration">var </aside>current_fov_x
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L4">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 4"/></a></h3>
        <p>Currently applied x size of the fov masks</p><h3 id="var/current_fov_y"><aside class="declaration">var </aside>current_fov_y
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L6">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 6"/></a></h3>
        <p>Currently applied y size of the fov masks</p><h3 id="var/fov_angle"><aside class="declaration">var </aside>fov_angle
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L10">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 10"/></a></h3>
        <p>The angle of the mask we are applying</p><h3 id="var/visual_shadow"><aside class="declaration">var </aside>visual_shadow
            <aside>&ndash; /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/screen.html">screen</a>/fov_shadow</aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 16"/></a></h3>
        <p>The shadow mask applied to a client's screen</p><h2 id="proc">Proc Details</h2><h3 id="proc/mob_logout"><aside class="declaration">proc </aside>mob_logout<aside>(/<a href="mob.html">mob</a>/source) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L128">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 128"/></a></aside>
        </h3>
        <p>When a mob logs out, delete the component</p><h3 id="proc/on_dir_change"><aside class="declaration">proc </aside>on_dir_change<aside>(/<a href="mob.html">mob</a>/source, old_dir, new_dir) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L122">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 122"/></a></aside>
        </h3>
        <p>When a direction of the user changes, so do the masks</p><h3 id="proc/update_fov_size"><aside class="declaration">proc </aside>update_fov_size<aside>() 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L56">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 56"/></a></aside>
        </h3>
        <p>Updates the size of the FOV masks by comparing them to client view size.</p><h3 id="proc/update_mask"><aside class="declaration">proc </aside>update_mask<aside>() 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L78">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 78"/></a></aside>
        </h3>
        <p>Updates the mask application to client by checking <code>stat</code> and <code>eye</code></p><h3 id="proc/update_visual_shadow_alpha"><aside class="declaration">proc </aside>update_visual_shadow_alpha<aside>() 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/fov_handler.dm#L149">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;fov_handler.dm 149"/></a></aside>
        </h3>
        <p>When toggling combat mode, we update the alpha of the shadow mask</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/ss220club/Skyrat-tg/tree/7005e7d7be5fdf147a5a0be095c7d866528ffaab">7005e7d</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.7.3</a></footer>
</body>
</html>
