<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;pet_command - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/pet_command.html#var">Var Details</a> - <a href="datum/pet_command.html#proc">Proc Details</a></header>
<main>
<h1>Pet Command <aside>/<a href="datum.html">datum</a>/<a href="datum/pet_command.html">pet_command</a></aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L6">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 6"/></a></h1>

<p>Set some AI blackboard commands in response to receiving instructions
This is abstract and should be extended for actual behaviour</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/pet_command.html#var/command_desc">command_desc</a></th><td>Description to display in radial menu</td></tr>
            <tr><th><a href="datum/pet_command.html#var/command_feedback">command_feedback</a></th><td>Shown above the mob's head when it hears you</td></tr>
            <tr><th><a href="datum/pet_command.html#var/command_name">command_name</a></th><td>Unique name used for radial selection, should not be shared with other commands on one mob</td></tr>
            <tr><th><a href="datum/pet_command.html#var/hidden">hidden</a></th><td>If true, command will not appear in radial menu and can only be accessed through speech</td></tr>
            <tr><th><a href="datum/pet_command.html#var/radial_icon">radial_icon</a></th><td>Icon to display in radial menu</td></tr>
            <tr><th><a href="datum/pet_command.html#var/radial_icon_state">radial_icon_state</a></th><td>Icon state to display in radial menu</td></tr>
            <tr><th><a href="datum/pet_command.html#var/sense_radius">sense_radius</a></th><td>How close a mob needs to be to a target to respond to a command</td></tr>
            <tr><th><a href="datum/pet_command.html#var/speech_commands">speech_commands</a></th><td>Speech strings to listen out for</td></tr>
            <tr><th><a href="datum/pet_command.html#var/weak_parent">weak_parent</a></th><td>Weak reference to who follows this command</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/pet_command.html#proc/add_new_friend">add_new_friend</a></th><td>Register a new guy we want to listen to</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/execute_action">execute_action</a></th><td>Execute an AI action on the provided controller, what we should actually do when this command is active.
This should basically always be called from a planning subtree which passes its own controller.
Return SUBTREE_RETURN_FINISH_PLANNING to pass that instruction on to the controller, or don't if you don't want that.</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/find_command_in_text">find_command_in_text</a></th><td>Returns true if we find any of our spoken commands in the text</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/provide_radial_data">provide_radial_data</a></th><td>Provide information about how to display this command in a radial menu</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/remove_friend">remove_friend</a></th><td>Stop listening to a guy</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/respond_to_command">respond_to_command</a></th><td>Respond to something that one of our friends has asked us to do</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/set_command_active">set_command_active</a></th><td>Activate the command, extend to add visible messages and the like</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/set_command_target">set_command_target</a></th><td>Store the target for the AI blackboard</td></tr>
            <tr><th><a href="datum/pet_command.html#proc/try_activate_command">try_activate_command</a></th><td>Apply a command state if conditions are right, return command if successful</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/command_desc"><aside class="declaration">var </aside>command_desc
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L12">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 12"/></a></h3>
        <p>Description to display in radial menu</p><h3 id="var/command_feedback"><aside class="declaration">var </aside>command_feedback
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L22">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 22"/></a></h3>
        <p>Shown above the mob's head when it hears you</p><h3 id="var/command_name"><aside class="declaration">var </aside>command_name
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L10">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 10"/></a></h3>
        <p>Unique name used for radial selection, should not be shared with other commands on one mob</p><h3 id="var/hidden"><aside class="declaration">var </aside>hidden
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 14"/></a></h3>
        <p>If true, command will not appear in radial menu and can only be accessed through speech</p><h3 id="var/radial_icon"><aside class="declaration">var </aside>radial_icon
            <aside>&ndash; /icon</aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 16"/></a></h3>
        <p>Icon to display in radial menu</p><h3 id="var/radial_icon_state"><aside class="declaration">var </aside>radial_icon_state
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L18">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 18"/></a></h3>
        <p>Icon state to display in radial menu</p><h3 id="var/sense_radius"><aside class="declaration">var </aside>sense_radius
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L24">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 24"/></a></h3>
        <p>How close a mob needs to be to a target to respond to a command</p><h3 id="var/speech_commands"><aside class="declaration">var </aside>speech_commands
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L20">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 20"/></a></h3>
        <p>Speech strings to listen out for</p><h3 id="var/weak_parent"><aside class="declaration">var </aside>weak_parent
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside>
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L8">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 8"/></a></h3>
        <p>Weak reference to who follows this command</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_new_friend"><aside class="declaration">proc </aside>add_new_friend<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/tamer) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L31">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 31"/></a></aside>
        </h3>
        <p>Register a new guy we want to listen to</p><h3 id="proc/execute_action"><aside class="declaration">proc </aside>execute_action<aside>(/<a href="datum.html">datum</a>/<a href="datum/ai_controller.html">ai_controller</a>/controller) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L107">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 107"/></a></aside>
        </h3>
        <p>Execute an AI action on the provided controller, what we should actually do when this command is active.
This should basically always be called from a planning subtree which passes its own controller.
Return SUBTREE_RETURN_FINISH_PLANNING to pass that instruction on to the controller, or don't if you don't want that.</p><h3 id="proc/find_command_in_text"><aside class="declaration">proc </aside>find_command_in_text<aside>(spoken_text) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L55">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 55"/></a></aside>
        </h3>
        <p>Returns true if we find any of our spoken commands in the text</p><h3 id="proc/provide_radial_data"><aside class="declaration">proc </aside>provide_radial_data<aside>() 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L89">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 89"/></a></aside>
        </h3>
        <p>Provide information about how to display this command in a radial menu</p><h3 id="proc/remove_friend"><aside class="declaration">proc </aside>remove_friend<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/unfriended) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L35">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 35"/></a></aside>
        </h3>
        <p>Stop listening to a guy</p><h3 id="proc/respond_to_command"><aside class="declaration">proc </aside>respond_to_command<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/speaker, speech_args) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L39">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 39"/></a></aside>
        </h3>
        <p>Respond to something that one of our friends has asked us to do</p><h3 id="proc/set_command_active"><aside class="declaration">proc </aside>set_command_active<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/parent, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/commander) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L76">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 76"/></a></aside>
        </h3>
        <p>Activate the command, extend to add visible messages and the like</p><h3 id="proc/set_command_target"><aside class="declaration">proc </aside>set_command_target<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/parent, /<a href="atom.html">atom</a>/target) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L85">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 85"/></a></aside>
        </h3>
        <p>Store the target for the AI blackboard</p><h3 id="proc/try_activate_command"><aside class="declaration">proc </aside>try_activate_command<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/commander) 
        
    
            <a href="https://github.com/ss220club/Skyrat-tg/blob/7005e7d7be5fdf147a5a0be095c7d866528ffaab/code/datums/components/pet_commands/pet_command.dm#L63">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;pet_commands&#x2F;pet_command.dm 63"/></a></aside>
        </h3>
        <p>Apply a command state if conditions are right, return command if successful</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/ss220club/Skyrat-tg/tree/7005e7d7be5fdf147a5a0be095c7d866528ffaab">7005e7d</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.7.3</a></footer>
</body>
</html>
